#### 思考
1、每个Broker可以存储多个Topic的消息，每个Topic的消息也可以分片存储于不同的Broker  
如何分片存储于不同的broker中？  
2、消息发送有同步发送、异步发送、顺序发送、单向发送  
重点了解异步发送和顺序发送的实现逻辑？  
3、消费消息分为拉取式消费和推动式消费  
了解push方式的实现逻辑  
4、broker对于消费者组、消费进度偏移、主题和队列信息是如何维护的？  
5、生产者组的作用？  
6、消费者组消费消息  
集群消费：同一个消费者组中的消费者平摊消费消息，如何实现的？  
广播消费：同一个消费者组中的每个消费者获取的是全量消息，如何实现？  
消费者批量消费消息如何commit consume offset？  
7、普通顺序消息和严格顺序消息  
普通顺序消息：同一个消费队列消息是有序的，整体是无序的  
严格顺序消息：消费者收到的消息整体是有序的，如何实现的？  
8、rocketMQ主从架构，消费者可以从slave broker上消费，kafka的架构是基于partition的，每个分区都有leader和同步副本，那么消息者消费分区的消息时，是否只能从leader节点上消息？？  
9、消费者既可以从master消费消息、也可以从slave消费消息，在向master拉取消息时，master服务器会根据一定的规则建议下次拉取是从master还是slave上拉取，这个规则是什么？？为什么要这样实现??  
10、发送消息时，选择队列的规则是什么？  
11、关于topic路由信息的上报和拉取  
- 通过定时上报和拉取topic路由信息，默认都是30s（确定）    

但是上述方式会出现延时的问题，新创建的topic信息可能没有及时同步，导致发送消息和消费消息报错，如何解决该问题？
- 创建topic时立即把该路由信息发送到namesrv上(猜测)  
- producer发送消息时，根据toipc在本地缓存中获取路由信息，当不存在时，去namesrv中同步路由信息，consumer类似（基本确定）  

12、消费者组中的负载均衡是如何完成的？  
13、broker如何通过half消息和op消息进行事务消息的回查？  
是否需要间隔一段时间进行回查？ 需要，默认通过transactionMsgTimeout设置多长时间后进行回查，也可以通过设置用户属性CHECK_IMMUNITY_TIME_IN_SECONDS来改变这个限制，该参数优先于transactionMsgTimeout参数。    



